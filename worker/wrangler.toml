name = "bux-data-worker"
main = "src/index.js"
compatibility_date = "2025-01-01"

# KV Namespace binding - replace <YOUR_KV_NAMESPACE_ID> after running:
# wrangler kv:namespace create "BUX_KV"
[[kv_namespaces]]
binding = "BUX_KV"
id = "f04ab8650fe44bb7a2adb22fd2c7d0c0"

# Cron trigger - every minute (Cloudflare minimum)
# Worker self-triggers at 30 seconds for effective 30-second updates
[triggers]
crons = ["* * * * *"]

# Environment variables (non-secret)
[vars]
CONTRACT_ADDRESS = "0xEE94957C2821B122F9e0c69805A5BA05132d1990"
DEPLOYMENT_BLOCK = "21292752"
BATCH_SIZE = "10"
BLOCKS_TO_QUERY = "30"

# Note: Add ALCHEMY_API_KEY as a secret via:
# wrangler secret put ALCHEMY_API_KEY
